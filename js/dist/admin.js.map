{"version":3,"file":"admin.js","mappings":"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","sources":["webpack://@litalino/mason/webpack/bootstrap","webpack://@litalino/mason/webpack/runtime/compat get default export","webpack://@litalino/mason/webpack/runtime/define property getters","webpack://@litalino/mason/webpack/runtime/hasOwnProperty shorthand","webpack://@litalino/mason/webpack/runtime/make namespace object","webpack://@litalino/mason/external root \"flarum.core.compat['admin/app']\"","webpack://@litalino/mason/./node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","webpack://@litalino/mason/./node_modules/@babel/runtime/helpers/esm/inheritsLoose.js","webpack://@litalino/mason/external root \"flarum.core.compat['common/Model']\"","webpack://@litalino/mason/./src/common/models/Answer.ts","webpack://@litalino/mason/external root \"flarum.core.compat['common/utils/computed']\"","webpack://@litalino/mason/./src/common/models/Field.ts","webpack://@litalino/mason/./src/common/models/ByTag.ts","webpack://@litalino/mason/./node_modules/html5sortable/dist/html5sortable.es.js","webpack://@litalino/mason/external root \"flarum.core.compat['admin/components/ExtensionPage']\"","webpack://@litalino/mason/external root \"flarum.core.compat['common/utils/throttleDebounce']\"","webpack://@litalino/mason/external root \"flarum.core.compat['common/helpers/icon']\"","webpack://@litalino/mason/external root \"flarum.core.compat['common/utils/extractText']\"","webpack://@litalino/mason/external root \"flarum.core.compat['common/Component']\"","webpack://@litalino/mason/external root \"flarum.core.compat['common/components/Button']\"","webpack://@litalino/mason/external root \"flarum.core.compat['common/components/Switch']\"","webpack://@litalino/mason/./src/admin/components/AnswerEdit.js","webpack://@litalino/mason/./src/common/helpers/sortByAttribute.ts","webpack://@litalino/mason/./src/admin/components/FieldAnswersEdit.js","webpack://@litalino/mason/./src/admin/components/FieldEdit.js","webpack://@litalino/mason/external root \"flarum.core.compat['common/utils/saveSettings']\"","webpack://@litalino/mason/external root \"flarum.core.compat['common/components/Select']\"","webpack://@litalino/mason/./src/admin/components/MasonSettings.js","webpack://@litalino/mason/./src/admin/components/TagFields.js","webpack://@litalino/mason/./src/admin/components/MasonSettingTags.js","webpack://@litalino/mason/./src/admin/pages/MasonFieldsPage.js","webpack://@litalino/mason/./src/admin/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/app'];","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf.js\";\nexport default function _inheritsLoose(subClass, superClass) {\n  subClass.prototype = Object.create(superClass.prototype);\n  subClass.prototype.constructor = subClass;\n  setPrototypeOf(subClass, superClass);\n}","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Model'];","import Model from 'flarum/common/Model';\r\nimport Field from './Field';\r\n\r\nexport default class Answer extends Model {\r\n    content = Model.attribute<string>('content');\r\n    is_suggested = Model.attribute<boolean>('is_suggested');\r\n    sort = Model.attribute<number | null>('sort');\r\n    field = Model.hasOne<Field>('field');\r\n\r\n    apiEndpoint() {\r\n        return '/litalino/mason/answers' + (this.exists ? '/' + this.data.id : '');\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/computed'];","import Model from 'flarum/common/Model';\r\nimport computed from 'flarum/common/utils/computed';\r\nimport Answer from './Answer';\r\n\r\nexport default class Field extends Model {\r\n    name = Model.attribute<string>('name');\r\n    description = Model.attribute<string | null>('description');\r\n    min_answers_count = Model.attribute<number>('min_answers_count');\r\n    max_answers_count = Model.attribute<number>('max_answers_count');\r\n    show_when_empty = Model.attribute<boolean>('show_when_empty');\r\n    user_values_allowed = Model.attribute<boolean>('user_values_allowed');\r\n    validation = Model.attribute<string | null>('validation');\r\n    icon = Model.attribute<string | null>('icon');\r\n    sort = Model.attribute<number | null>('sort');\r\n    deleted_at = Model.attribute('deleted_at', Model.transformDate);\r\n    allAnswers = Model.hasMany<Answer>('allAnswers');\r\n    suggestedAnswers = Model.hasMany<Answer>('suggestedAnswers');\r\n    required = computed<boolean>('min_answers_count', (min_answers_count) => min_answers_count > 0);\r\n    multiple = computed<boolean>('max_answers_count', (max_answers_count) => max_answers_count > 1);\r\n\r\n    apiEndpoint() {\r\n        return '/litalino/mason/fields' + (this.exists ? '/' + this.data.id : '');\r\n    }\r\n}\r\n","import Model from 'flarum/common/Model';\r\n\r\nexport default class ByTag extends Model {\r\n    tag_name = Model.attribute('tag_name');\r\n    tag_id = Model.attribute('tag_id');\r\n    field_name = Model.attribute('field_name');\r\n    switch = Model.attribute('switch');\r\n\r\n    apiEndpoint() {\r\n        return '/litalino/mason/bytags' + (this.exists ? '/' + this.data.id : '');\r\n    }\r\n}\r\n","/*\n * HTML5Sortable package\n * https://github.com/lukasoppermann/html5sortable\n *\n * Maintained by Lukas Oppermann <lukas@vea.re>\n *\n * Released under the MIT license.\n */\n/**\n * Get or set data on element\n * @param {HTMLElement} element\n * @param {string} key\n * @param {any} value\n * @return {*}\n */\nfunction addData(element, key, value) {\n    if (value === undefined) {\n        return element && element.h5s && element.h5s.data && element.h5s.data[key];\n    }\n    else {\n        element.h5s = element.h5s || {};\n        element.h5s.data = element.h5s.data || {};\n        element.h5s.data[key] = value;\n    }\n}\n/**\n * Remove data from element\n * @param {HTMLElement} element\n */\nfunction removeData(element) {\n    if (element.h5s) {\n        delete element.h5s.data;\n    }\n}\n\n/* eslint-env browser */\n/**\n * Filter only wanted nodes\n * @param {NodeList|HTMLCollection|Array} nodes\n * @param {String} selector\n * @returns {Array}\n */\nvar _filter = (function (nodes, selector) {\n    if (!(nodes instanceof NodeList || nodes instanceof HTMLCollection || nodes instanceof Array)) {\n        throw new Error('You must provide a nodeList/HTMLCollection/Array of elements to be filtered.');\n    }\n    if (typeof selector !== 'string') {\n        return Array.from(nodes);\n    }\n    return Array.from(nodes).filter(function (item) { return item.nodeType === 1 && item.matches(selector); });\n});\n\n/* eslint-env browser */\nvar stores = new Map();\n/**\n * Stores data & configurations per Sortable\n * @param {Object} config\n */\nvar Store = /** @class */ (function () {\n    function Store() {\n        this._config = new Map(); // eslint-disable-line no-undef\n        this._placeholder = undefined; // eslint-disable-line no-undef\n        this._data = new Map(); // eslint-disable-line no-undef\n    }\n    Object.defineProperty(Store.prototype, \"config\", {\n        /**\n         * get the configuration map of a class instance\n         * @method config\n         * @return {object}\n         */\n        get: function () {\n            // transform Map to object\n            var config = {};\n            this._config.forEach(function (value, key) {\n                config[key] = value;\n            });\n            // return object\n            return config;\n        },\n        /**\n         * set the configuration of a class instance\n         * @method config\n         * @param {object} config object of configurations\n         */\n        set: function (config) {\n            if (typeof config !== 'object') {\n                throw new Error('You must provide a valid configuration object to the config setter.');\n            }\n            // combine config with default\n            var mergedConfig = Object.assign({}, config);\n            // add config to map\n            this._config = new Map(Object.entries(mergedConfig));\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * set individual configuration of a class instance\n     * @method setConfig\n     * @param  key valid configuration key\n     * @param  value any value\n     * @return void\n     */\n    Store.prototype.setConfig = function (key, value) {\n        if (!this._config.has(key)) {\n            throw new Error(\"Trying to set invalid configuration item: \" + key);\n        }\n        // set config\n        this._config.set(key, value);\n    };\n    /**\n     * get an individual configuration of a class instance\n     * @method getConfig\n     * @param  key valid configuration key\n     * @return any configuration value\n     */\n    Store.prototype.getConfig = function (key) {\n        if (!this._config.has(key)) {\n            throw new Error(\"Invalid configuration item requested: \" + key);\n        }\n        return this._config.get(key);\n    };\n    Object.defineProperty(Store.prototype, \"placeholder\", {\n        /**\n         * get the placeholder for a class instance\n         * @method placeholder\n         * @return {HTMLElement|null}\n         */\n        get: function () {\n            return this._placeholder;\n        },\n        /**\n         * set the placeholder for a class instance\n         * @method placeholder\n         * @param {HTMLElement} placeholder\n         * @return {void}\n         */\n        set: function (placeholder) {\n            if (!(placeholder instanceof HTMLElement) && placeholder !== null) {\n                throw new Error('A placeholder must be an html element or null.');\n            }\n            this._placeholder = placeholder;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * set an data entry\n     * @method setData\n     * @param {string} key\n     * @param {any} value\n     * @return {void}\n     */\n    Store.prototype.setData = function (key, value) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        this._data.set(key, value);\n    };\n    /**\n     * get an data entry\n     * @method getData\n     * @param {string} key an existing key\n     * @return {any}\n     */\n    Store.prototype.getData = function (key) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        return this._data.get(key);\n    };\n    /**\n     * delete an data entry\n     * @method deleteData\n     * @param {string} key an existing key\n     * @return {boolean}\n     */\n    Store.prototype.deleteData = function (key) {\n        if (typeof key !== 'string') {\n            throw new Error('The key must be a string.');\n        }\n        return this._data.delete(key);\n    };\n    return Store;\n}());\n/**\n * @param {HTMLElement} sortableElement\n * @returns {Class: Store}\n */\nvar store = (function (sortableElement) {\n    // if sortableElement is wrong type\n    if (!(sortableElement instanceof HTMLElement)) {\n        throw new Error('Please provide a sortable to the store function.');\n    }\n    // create new instance if not avilable\n    if (!stores.has(sortableElement)) {\n        stores.set(sortableElement, new Store());\n    }\n    // return instance\n    return stores.get(sortableElement);\n});\n\n/**\n * @param {Array|HTMLElement} element\n * @param {Function} callback\n * @param {string} event\n */\nfunction addEventListener(element, eventName, callback) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            addEventListener(element[i], eventName, callback);\n        }\n        return;\n    }\n    element.addEventListener(eventName, callback);\n    store(element).setData(\"event\" + eventName, callback);\n}\n/**\n * @param {Array<HTMLElement>|HTMLElement} element\n * @param {string} eventName\n */\nfunction removeEventListener(element, eventName) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            removeEventListener(element[i], eventName);\n        }\n        return;\n    }\n    element.removeEventListener(eventName, store(element).getData(\"event\" + eventName));\n    store(element).deleteData(\"event\" + eventName);\n}\n\n/**\n * @param {Array<HTMLElement>|HTMLElement} element\n * @param {string} attribute\n * @param {string} value\n */\nfunction addAttribute(element, attribute, value) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            addAttribute(element[i], attribute, value);\n        }\n        return;\n    }\n    element.setAttribute(attribute, value);\n}\n/**\n * @param {Array|HTMLElement} element\n * @param {string} attribute\n */\nfunction removeAttribute(element, attribute) {\n    if (element instanceof Array) {\n        for (var i = 0; i < element.length; ++i) {\n            removeAttribute(element[i], attribute);\n        }\n        return;\n    }\n    element.removeAttribute(attribute);\n}\n\n/**\n * @param {HTMLElement} element\n * @returns {Object}\n */\nvar _offset = (function (element) {\n    if (!element.parentElement || element.getClientRects().length === 0) {\n        throw new Error('target element must be part of the dom');\n    }\n    var rect = element.getClientRects()[0];\n    return {\n        left: rect.left + window.pageXOffset,\n        right: rect.right + window.pageXOffset,\n        top: rect.top + window.pageYOffset,\n        bottom: rect.bottom + window.pageYOffset\n    };\n});\n\n/**\n * Creates and returns a new debounced version of the passed function which will postpone its execution until after wait milliseconds have elapsed\n * @param {Function} func to debounce\n * @param {number} time to wait before calling function with latest arguments, 0 - no debounce\n * @returns {function} - debounced function\n */\nvar _debounce = (function (func, wait) {\n    if (wait === void 0) { wait = 0; }\n    var timeout;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        clearTimeout(timeout);\n        timeout = setTimeout(function () {\n            func.apply(void 0, args);\n        }, wait);\n    };\n});\n\n/* eslint-env browser */\n/**\n * Get position of the element relatively to its sibling elements\n * @param {HTMLElement} element\n * @returns {number}\n */\nvar _index = (function (element, elementList) {\n    if (!(element instanceof HTMLElement) || !(elementList instanceof NodeList || elementList instanceof HTMLCollection || elementList instanceof Array)) {\n        throw new Error('You must provide an element and a list of elements.');\n    }\n    return Array.from(elementList).indexOf(element);\n});\n\n/* eslint-env browser */\n/**\n * Test whether element is in DOM\n * @param {HTMLElement} element\n * @returns {boolean}\n */\nvar isInDom = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('Element is not a node element.');\n    }\n    return element.parentNode !== null;\n});\n\n/* eslint-env browser */\n/**\n * Insert node before or after target\n * @param {HTMLElement} referenceNode - reference element\n * @param {HTMLElement} newElement - element to be inserted\n * @param {String} position - insert before or after reference element\n */\nvar insertNode = function (referenceNode, newElement, position) {\n    if (!(referenceNode instanceof HTMLElement) || !(referenceNode.parentElement instanceof HTMLElement)) {\n        throw new Error('target and element must be a node');\n    }\n    referenceNode.parentElement.insertBefore(newElement, (position === 'before' ? referenceNode : referenceNode.nextElementSibling));\n};\n/**\n * Insert before target\n * @param {HTMLElement} target\n * @param {HTMLElement} element\n */\nvar insertBefore = function (target, element) { return insertNode(target, element, 'before'); };\n/**\n * Insert after target\n * @param {HTMLElement} target\n * @param {HTMLElement} element\n */\nvar insertAfter = function (target, element) { return insertNode(target, element, 'after'); };\n\n/* eslint-env browser */\n/**\n * Filter only wanted nodes\n * @param {HTMLElement} sortableContainer\n * @param {Function} customSerializer\n * @returns {Array}\n */\nvar _serialize = (function (sortableContainer, customItemSerializer, customContainerSerializer) {\n    if (customItemSerializer === void 0) { customItemSerializer = function (serializedItem, sortableContainer) { return serializedItem; }; }\n    if (customContainerSerializer === void 0) { customContainerSerializer = function (serializedContainer) { return serializedContainer; }; }\n    // check for valid sortableContainer\n    if (!(sortableContainer instanceof HTMLElement) || !sortableContainer.isSortable === true) {\n        throw new Error('You need to provide a sortableContainer to be serialized.');\n    }\n    // check for valid serializers\n    if (typeof customItemSerializer !== 'function' || typeof customContainerSerializer !== 'function') {\n        throw new Error('You need to provide a valid serializer for items and the container.');\n    }\n    // get options\n    var options = addData(sortableContainer, 'opts');\n    var item = options.items;\n    // serialize container\n    var items = _filter(sortableContainer.children, item);\n    var serializedItems = items.map(function (item) {\n        return {\n            parent: sortableContainer,\n            node: item,\n            html: item.outerHTML,\n            index: _index(item, items)\n        };\n    });\n    // serialize container\n    var container = {\n        node: sortableContainer,\n        itemCount: serializedItems.length\n    };\n    return {\n        container: customContainerSerializer(container),\n        items: serializedItems.map(function (item) { return customItemSerializer(item, sortableContainer); })\n    };\n});\n\n/* eslint-env browser */\n/**\n * create a placeholder element\n * @param {HTMLElement} sortableElement a single sortable\n * @param {string|undefined} placeholder a string representing an html element\n * @param {string} placeholderClasses a string representing the classes that should be added to the placeholder\n */\nvar _makePlaceholder = (function (sortableElement, placeholder, placeholderClass) {\n    var _a;\n    if (placeholderClass === void 0) { placeholderClass = 'sortable-placeholder'; }\n    if (!(sortableElement instanceof HTMLElement)) {\n        throw new Error('You must provide a valid element as a sortable.');\n    }\n    // if placeholder is not an element\n    if (!(placeholder instanceof HTMLElement) && placeholder !== undefined) {\n        throw new Error('You must provide a valid element as a placeholder or set ot to undefined.');\n    }\n    // if no placeholder element is given\n    if (placeholder === undefined) {\n        if (['UL', 'OL'].includes(sortableElement.tagName)) {\n            placeholder = document.createElement('li');\n        }\n        else if (['TABLE', 'TBODY'].includes(sortableElement.tagName)) {\n            placeholder = document.createElement('tr');\n            // set colspan to always all rows, otherwise the item can only be dropped in first column\n            placeholder.innerHTML = '<td colspan=\"100\"></td>';\n        }\n        else {\n            placeholder = document.createElement('div');\n        }\n    }\n    // add classes to placeholder\n    if (typeof placeholderClass === 'string') {\n        (_a = placeholder.classList).add.apply(_a, placeholderClass.split(' '));\n    }\n    return placeholder;\n});\n\n/* eslint-env browser */\n/**\n * Get height of an element including padding\n * @param {HTMLElement} element an dom element\n */\nvar _getElementHeight = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('You must provide a valid dom element');\n    }\n    // get calculated style of element\n    var style = window.getComputedStyle(element);\n    // get only height if element has box-sizing: border-box specified\n    if (style.getPropertyValue('box-sizing') === 'border-box') {\n        return parseInt(style.getPropertyValue('height'), 10);\n    }\n    // pick applicable properties, convert to int and reduce by adding\n    return ['height', 'padding-top', 'padding-bottom']\n        .map(function (key) {\n        var int = parseInt(style.getPropertyValue(key), 10);\n        return isNaN(int) ? 0 : int;\n    })\n        .reduce(function (sum, value) { return sum + value; });\n});\n\n/* eslint-env browser */\n/**\n * Get width of an element including padding\n * @param {HTMLElement} element an dom element\n */\nvar _getElementWidth = (function (element) {\n    if (!(element instanceof HTMLElement)) {\n        throw new Error('You must provide a valid dom element');\n    }\n    // get calculated style of element\n    var style = window.getComputedStyle(element);\n    // pick applicable properties, convert to int and reduce by adding\n    return ['width', 'padding-left', 'padding-right']\n        .map(function (key) {\n        var int = parseInt(style.getPropertyValue(key), 10);\n        return isNaN(int) ? 0 : int;\n    })\n        .reduce(function (sum, value) { return sum + value; });\n});\n\n/* eslint-env browser */\n/**\n * get handle or return item\n * @param {Array<HTMLElement>} items\n * @param {string} selector\n */\nvar _getHandles = (function (items, selector) {\n    if (!(items instanceof Array)) {\n        throw new Error('You must provide a Array of HTMLElements to be filtered.');\n    }\n    if (typeof selector !== 'string') {\n        return items;\n    }\n    return items\n        // remove items without handle from array\n        .filter(function (item) {\n        return item.querySelector(selector) instanceof HTMLElement ||\n            (item.shadowRoot && item.shadowRoot.querySelector(selector) instanceof HTMLElement);\n    })\n        // replace item with handle in array\n        .map(function (item) {\n        return item.querySelector(selector) || (item.shadowRoot && item.shadowRoot.querySelector(selector));\n    });\n});\n\n/**\n * @param {Event} event\n * @returns {HTMLElement}\n */\nvar getEventTarget = (function (event) {\n    return (event.composedPath && event.composedPath()[0]) || event.target;\n});\n\n/* eslint-env browser */\n/**\n * defaultDragImage returns the current item as dragged image\n * @param {HTMLElement} draggedElement - the item that the user drags\n * @param {object} elementOffset - an object with the offsets top, left, right & bottom\n * @param {Event} event - the original drag event object\n * @return {object} with element, posX and posY properties\n */\nvar defaultDragImage = function (draggedElement, elementOffset, event) {\n    return {\n        element: draggedElement,\n        posX: event.pageX - elementOffset.left,\n        posY: event.pageY - elementOffset.top\n    };\n};\n/**\n * attaches an element as the drag image to an event\n * @param {Event} event - the original drag event object\n * @param {HTMLElement} draggedElement - the item that the user drags\n * @param {Function} customDragImage - function to create a custom dragImage\n * @return void\n */\nvar setDragImage = (function (event, draggedElement, customDragImage) {\n    // check if event is provided\n    if (!(event instanceof Event)) {\n        throw new Error('setDragImage requires a DragEvent as the first argument.');\n    }\n    // check if draggedElement is provided\n    if (!(draggedElement instanceof HTMLElement)) {\n        throw new Error('setDragImage requires the dragged element as the second argument.');\n    }\n    // set default function of none provided\n    if (!customDragImage) {\n        customDragImage = defaultDragImage;\n    }\n    // check if setDragImage method is available\n    if (event.dataTransfer && event.dataTransfer.setDragImage) {\n        // get the elements offset\n        var elementOffset = _offset(draggedElement);\n        // get the dragImage\n        var dragImage = customDragImage(draggedElement, elementOffset, event);\n        // check if custom function returns correct values\n        if (!(dragImage.element instanceof HTMLElement) || typeof dragImage.posX !== 'number' || typeof dragImage.posY !== 'number') {\n            throw new Error('The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].');\n        }\n        // needs to be set for HTML5 drag & drop to work\n        event.dataTransfer.effectAllowed = 'copyMove';\n        // Firefox requires it to use the event target's id for the data\n        event.dataTransfer.setData('text/plain', getEventTarget(event).id);\n        // set the drag image on the event\n        event.dataTransfer.setDragImage(dragImage.element, dragImage.posX, dragImage.posY);\n    }\n});\n\n/**\n * Check if curList accepts items from destList\n * @param {sortable} destination the container an item is move to\n * @param {sortable} origin the container an item comes from\n */\nvar _listsConnected = (function (destination, origin) {\n    // check if valid sortable\n    if (destination.isSortable === true) {\n        var acceptFrom = store(destination).getConfig('acceptFrom');\n        // check if acceptFrom is valid\n        if (acceptFrom !== null && acceptFrom !== false && typeof acceptFrom !== 'string') {\n            throw new Error('HTML5Sortable: Wrong argument, \"acceptFrom\" must be \"null\", \"false\", or a valid selector string.');\n        }\n        if (acceptFrom !== null) {\n            return acceptFrom !== false && acceptFrom.split(',').filter(function (sel) {\n                return sel.length > 0 && origin.matches(sel);\n            }).length > 0;\n        }\n        // drop in same list\n        if (destination === origin) {\n            return true;\n        }\n        // check if lists are connected with connectWith\n        if (store(destination).getConfig('connectWith') !== undefined && store(destination).getConfig('connectWith') !== null) {\n            return store(destination).getConfig('connectWith') === store(origin).getConfig('connectWith');\n        }\n    }\n    return false;\n});\n\n/**\n * default configurations\n */\nvar defaultConfiguration = {\n    items: null,\n    // deprecated\n    connectWith: null,\n    // deprecated\n    disableIEFix: null,\n    acceptFrom: null,\n    copy: false,\n    placeholder: null,\n    placeholderClass: 'sortable-placeholder',\n    draggingClass: 'sortable-dragging',\n    hoverClass: false,\n    dropTargetContainerClass: false,\n    debounce: 0,\n    throttleTime: 100,\n    maxItems: 0,\n    itemSerializer: undefined,\n    containerSerializer: undefined,\n    customDragImage: null,\n    orientation: 'vertical'\n};\n\n/**\n * make sure a function is only called once within the given amount of time\n * @param {Function} fn the function to throttle\n * @param {number} threshold time limit for throttling\n */\n// must use function to keep this context\nfunction _throttle (fn, threshold) {\n    var _this = this;\n    if (threshold === void 0) { threshold = 250; }\n    // check function\n    if (typeof fn !== 'function') {\n        throw new Error('You must provide a function as the first argument for throttle.');\n    }\n    // check threshold\n    if (typeof threshold !== 'number') {\n        throw new Error('You must provide a number as the second argument for throttle.');\n    }\n    var lastEventTimestamp = null;\n    return function () {\n        var args = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            args[_i] = arguments[_i];\n        }\n        var now = Date.now();\n        if (lastEventTimestamp === null || now - lastEventTimestamp >= threshold) {\n            lastEventTimestamp = now;\n            fn.apply(_this, args);\n        }\n    };\n}\n\n/* eslint-env browser */\n/**\n * enable or disable hoverClass on mouseenter/leave if container Items\n * @param {sortable} sortableContainer a valid sortableContainer\n * @param {boolean} enable enable or disable event\n */\n// export default (sortableContainer: sortable, enable: boolean) => {\nvar enableHoverClass = (function (sortableContainer, enable) {\n    if (typeof store(sortableContainer).getConfig('hoverClass') === 'string') {\n        var hoverClasses_1 = store(sortableContainer).getConfig('hoverClass').split(' ');\n        // add class on hover\n        if (enable === true) {\n            addEventListener(sortableContainer, 'mousemove', _throttle(function (event) {\n                // check of no mouse button was pressed when mousemove started == no drag\n                if (event.buttons === 0) {\n                    _filter(sortableContainer.children, store(sortableContainer).getConfig('items')).forEach(function (item) {\n                        var _a, _b;\n                        if (item !== event.target) {\n                            (_a = item.classList).remove.apply(_a, hoverClasses_1);\n                        }\n                        else {\n                            (_b = item.classList).add.apply(_b, hoverClasses_1);\n                        }\n                    });\n                }\n            }, store(sortableContainer).getConfig('throttleTime')));\n            // remove class on leave\n            addEventListener(sortableContainer, 'mouseleave', function () {\n                _filter(sortableContainer.children, store(sortableContainer).getConfig('items')).forEach(function (item) {\n                    var _a;\n                    (_a = item.classList).remove.apply(_a, hoverClasses_1);\n                });\n            });\n            // remove events\n        }\n        else {\n            removeEventListener(sortableContainer, 'mousemove');\n            removeEventListener(sortableContainer, 'mouseleave');\n        }\n    }\n});\n\n/* eslint-env browser */\n/*\n * variables global to the plugin\n */\nvar dragging;\nvar draggingHeight;\nvar draggingWidth;\n/*\n * Keeps track of the initialy selected list, where 'dragstart' event was triggered\n * It allows us to move the data in between individual Sortable List instances\n */\n// Origin List - data from before any item was changed\nvar originContainer;\nvar originIndex;\nvar originElementIndex;\nvar originItemsBeforeUpdate;\n// Previous Sortable Container - we dispatch as sortenter event when a\n// dragged item enters a sortableContainer for the first time\nvar previousContainer;\n// Destination List - data from before any item was changed\nvar destinationItemsBeforeUpdate;\n/**\n * remove event handlers from items\n * @param {Array|NodeList} items\n */\nvar _removeItemEvents = function (items) {\n    removeEventListener(items, 'dragstart');\n    removeEventListener(items, 'dragend');\n    removeEventListener(items, 'dragover');\n    removeEventListener(items, 'dragenter');\n    removeEventListener(items, 'drop');\n    removeEventListener(items, 'mouseenter');\n    removeEventListener(items, 'mouseleave');\n};\n// Remove container events\nvar _removeContainerEvents = function (originContainer, previousContainer) {\n    if (originContainer) {\n        removeEventListener(originContainer, 'dragleave');\n    }\n    if (previousContainer && (previousContainer !== originContainer)) {\n        removeEventListener(previousContainer, 'dragleave');\n    }\n};\n/**\n * _getDragging returns the current element to drag or\n * a copy of the element.\n * Is Copy Active for sortable\n * @param {HTMLElement} draggedItem - the item that the user drags\n * @param {HTMLElement} sortable a single sortable\n */\nvar _getDragging = function (draggedItem, sortable) {\n    var ditem = draggedItem;\n    if (store(sortable).getConfig('copy') === true) {\n        ditem = draggedItem.cloneNode(true);\n        addAttribute(ditem, 'aria-copied', 'true');\n        draggedItem.parentElement.appendChild(ditem);\n        ditem.style.display = 'none';\n        ditem.oldDisplay = draggedItem.style.display;\n    }\n    return ditem;\n};\n/**\n * Remove data from sortable\n * @param {HTMLElement} sortable a single sortable\n */\nvar _removeSortableData = function (sortable) {\n    removeData(sortable);\n    removeAttribute(sortable, 'aria-dropeffect');\n};\n/**\n * Remove data from items\n * @param {Array<HTMLElement>|HTMLElement} items\n */\nvar _removeItemData = function (items) {\n    removeAttribute(items, 'aria-grabbed');\n    removeAttribute(items, 'aria-copied');\n    removeAttribute(items, 'draggable');\n    removeAttribute(items, 'role');\n};\n/**\n * find sortable from element. travels up parent element until found or null.\n * @param {HTMLElement} element a single sortable\n * @param {Event} event - the current event. We need to pass it to be able to\n * find Sortable whith shadowRoot (document fragment has no parent)\n */\nfunction findSortable(element, event) {\n    if (event.composedPath) {\n        return event.composedPath().find(function (el) { return el.isSortable; });\n    }\n    while (element.isSortable !== true) {\n        element = element.parentElement;\n    }\n    return element;\n}\n/**\n * Dragging event is on the sortable element. finds the top child that\n * contains the element.\n * @param {HTMLElement} sortableElement a single sortable\n * @param {HTMLElement} element is that being dragged\n */\nfunction findDragElement(sortableElement, element) {\n    var options = addData(sortableElement, 'opts');\n    var items = _filter(sortableElement.children, options.items);\n    var itemlist = items.filter(function (ele) {\n        return ele.contains(element) || (ele.shadowRoot && ele.shadowRoot.contains(element));\n    });\n    return itemlist.length > 0 ? itemlist[0] : element;\n}\n/**\n * Destroy the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar _destroySortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts') || {};\n    var items = _filter(sortableElement.children, opts.items);\n    var handles = _getHandles(items, opts.handle);\n    // remove event handlers & data from sortable\n    removeEventListener(sortableElement, 'dragover');\n    removeEventListener(sortableElement, 'dragenter');\n    removeEventListener(sortableElement, 'dragstart');\n    removeEventListener(sortableElement, 'dragend');\n    removeEventListener(sortableElement, 'drop');\n    // remove event data from sortable\n    _removeSortableData(sortableElement);\n    // remove event handlers & data from items\n    removeEventListener(handles, 'mousedown');\n    _removeItemEvents(items);\n    _removeItemData(items);\n    _removeContainerEvents(originContainer, previousContainer);\n    // clear sortable flag\n    sortableElement.isSortable = false;\n};\n/**\n * Enable the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar _enableSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = _filter(sortableElement.children, opts.items);\n    var handles = _getHandles(items, opts.handle);\n    addAttribute(sortableElement, 'aria-dropeffect', 'move');\n    addData(sortableElement, '_disabled', 'false');\n    addAttribute(handles, 'draggable', 'true');\n    // @todo: remove this fix\n    // IE FIX for ghost\n    // can be disabled as it has the side effect that other events\n    // (e.g. click) will be ignored\n    if (opts.disableIEFix === false) {\n        var spanEl = (document || window.document).createElement('span');\n        if (typeof spanEl.dragDrop === 'function') {\n            addEventListener(handles, 'mousedown', function () {\n                if (items.indexOf(this) !== -1) {\n                    this.dragDrop();\n                }\n                else {\n                    var parent = this.parentElement;\n                    while (items.indexOf(parent) === -1) {\n                        parent = parent.parentElement;\n                    }\n                    parent.dragDrop();\n                }\n            });\n        }\n    }\n};\n/**\n * Disable the sortable\n * @param {HTMLElement} sortableElement a single sortable\n */\nvar _disableSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = _filter(sortableElement.children, opts.items);\n    var handles = _getHandles(items, opts.handle);\n    addAttribute(sortableElement, 'aria-dropeffect', 'none');\n    addData(sortableElement, '_disabled', 'true');\n    addAttribute(handles, 'draggable', 'false');\n    removeEventListener(handles, 'mousedown');\n};\n/**\n * Reload the sortable\n * @param {HTMLElement} sortableElement a single sortable\n * @description events need to be removed to not be double bound\n */\nvar _reloadSortable = function (sortableElement) {\n    var opts = addData(sortableElement, 'opts');\n    var items = _filter(sortableElement.children, opts.items);\n    var handles = _getHandles(items, opts.handle);\n    addData(sortableElement, '_disabled', 'false');\n    // remove event handlers from items\n    _removeItemEvents(items);\n    _removeContainerEvents(originContainer, previousContainer);\n    removeEventListener(handles, 'mousedown');\n    // remove event handlers from sortable\n    removeEventListener(sortableElement, 'dragover');\n    removeEventListener(sortableElement, 'dragenter');\n    removeEventListener(sortableElement, 'drop');\n};\n/**\n * Public sortable object\n * @param {Array|NodeList} sortableElements\n * @param {object|string} options|method\n */\nfunction sortable(sortableElements, options) {\n    // get method string to see if a method is called\n    var method = String(options);\n    options = options || {};\n    // check if the user provided a selector instead of an element\n    if (typeof sortableElements === 'string') {\n        sortableElements = document.querySelectorAll(sortableElements);\n    }\n    // if the user provided an element, return it in an array to keep the return value consistant\n    if (sortableElements instanceof HTMLElement) {\n        sortableElements = [sortableElements];\n    }\n    sortableElements = Array.prototype.slice.call(sortableElements);\n    if (/serialize/.test(method)) {\n        return sortableElements.map(function (sortableContainer) {\n            var opts = addData(sortableContainer, 'opts');\n            return _serialize(sortableContainer, opts.itemSerializer, opts.containerSerializer);\n        });\n    }\n    sortableElements.forEach(function (sortableElement) {\n        if (/enable|disable|destroy/.test(method)) {\n            return sortable[method](sortableElement);\n        }\n        // log deprecation\n        ['connectWith', 'disableIEFix'].forEach(function (configKey) {\n            if (Object.prototype.hasOwnProperty.call(options, configKey) && options[configKey] !== null) {\n                console.warn(\"HTML5Sortable: You are using the deprecated configuration \\\"\" + configKey + \"\\\". This will be removed in an upcoming version, make sure to migrate to the new options when updating.\");\n            }\n        });\n        // merge options with default options\n        options = Object.assign({}, defaultConfiguration, store(sortableElement).config, options);\n        // init data store for sortable\n        store(sortableElement).config = options;\n        // set options on sortable\n        addData(sortableElement, 'opts', options);\n        // property to define as sortable\n        sortableElement.isSortable = true;\n        // reset sortable\n        _reloadSortable(sortableElement);\n        // initialize\n        var listItems = _filter(sortableElement.children, options.items);\n        // create element if user defined a placeholder element as a string\n        var customPlaceholder;\n        if (options.placeholder !== null && options.placeholder !== undefined) {\n            var tempContainer = document.createElement(sortableElement.tagName);\n            if (options.placeholder instanceof HTMLElement) {\n                tempContainer.appendChild(options.placeholder);\n            }\n            else {\n                tempContainer.innerHTML = options.placeholder;\n            }\n            customPlaceholder = tempContainer.children[0];\n        }\n        // add placeholder\n        store(sortableElement).placeholder = _makePlaceholder(sortableElement, customPlaceholder, options.placeholderClass);\n        addData(sortableElement, 'items', options.items);\n        if (options.acceptFrom) {\n            addData(sortableElement, 'acceptFrom', options.acceptFrom);\n        }\n        else if (options.connectWith) {\n            addData(sortableElement, 'connectWith', options.connectWith);\n        }\n        _enableSortable(sortableElement);\n        addAttribute(listItems, 'role', 'option');\n        addAttribute(listItems, 'aria-grabbed', 'false');\n        // enable hover class\n        enableHoverClass(sortableElement, true);\n        /*\n         Handle drag events on draggable items\n         Handle is set at the sortableElement level as it will bubble up\n         from the item\n         */\n        addEventListener(sortableElement, 'dragstart', function (e) {\n            // ignore dragstart events\n            var target = getEventTarget(e);\n            if (target.isSortable === true) {\n                return;\n            }\n            e.stopImmediatePropagation();\n            if ((options.handle && !target.matches(options.handle)) || target.getAttribute('draggable') === 'false') {\n                return;\n            }\n            var sortableContainer = findSortable(target, e);\n            var dragItem = findDragElement(sortableContainer, target);\n            // grab values\n            originItemsBeforeUpdate = _filter(sortableContainer.children, options.items);\n            originIndex = originItemsBeforeUpdate.indexOf(dragItem);\n            originElementIndex = _index(dragItem, sortableContainer.children);\n            originContainer = sortableContainer;\n            // add transparent clone or other ghost to cursor\n            setDragImage(e, dragItem, options.customDragImage);\n            // cache selsection & add attr for dragging\n            draggingHeight = _getElementHeight(dragItem);\n            draggingWidth = _getElementWidth(dragItem);\n            dragItem.classList.add(options.draggingClass);\n            dragging = _getDragging(dragItem, sortableContainer);\n            addAttribute(dragging, 'aria-grabbed', 'true');\n            // dispatch sortstart event on each element in group\n            sortableContainer.dispatchEvent(new CustomEvent('sortstart', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging,\n                    originalTarget: target\n                }\n            }));\n        });\n        /*\n         We are capturing targetSortable before modifications with 'dragenter' event\n        */\n        addEventListener(sortableElement, 'dragenter', function (e) {\n            var target = getEventTarget(e);\n            var sortableContainer = findSortable(target, e);\n            if (sortableContainer && sortableContainer !== previousContainer) {\n                destinationItemsBeforeUpdate = _filter(sortableContainer.children, addData(sortableContainer, 'items'))\n                    .filter(function (item) { return item !== store(sortableElement).placeholder; });\n                if (options.dropTargetContainerClass) {\n                    sortableContainer.classList.add(options.dropTargetContainerClass);\n                }\n                sortableContainer.dispatchEvent(new CustomEvent('sortenter', {\n                    detail: {\n                        origin: {\n                            elementIndex: originElementIndex,\n                            index: originIndex,\n                            container: originContainer\n                        },\n                        destination: {\n                            container: sortableContainer,\n                            itemsBeforeUpdate: destinationItemsBeforeUpdate\n                        },\n                        item: dragging,\n                        originalTarget: target\n                    }\n                }));\n                addEventListener(sortableContainer, 'dragleave', function (e) {\n                    // TODO: rename outTarget to be more self-explanatory\n                    // e.fromElement for very old browsers, similar to relatedTarget\n                    var outTarget = e.relatedTarget || e.fromElement;\n                    if (!e.currentTarget.contains(outTarget)) {\n                        if (options.dropTargetContainerClass) {\n                            sortableContainer.classList.remove(options.dropTargetContainerClass);\n                        }\n                        sortableContainer.dispatchEvent(new CustomEvent('sortleave', {\n                            detail: {\n                                origin: {\n                                    elementIndex: originElementIndex,\n                                    index: originIndex,\n                                    container: sortableContainer\n                                },\n                                item: dragging,\n                                originalTarget: target\n                            }\n                        }));\n                    }\n                });\n            }\n            previousContainer = sortableContainer;\n        });\n        /*\n         * Dragend Event - https://developer.mozilla.org/en-US/docs/Web/Events/dragend\n         * Fires each time dragEvent end, or ESC pressed\n         * We are using it to clean up any draggable elements and placeholders\n         */\n        addEventListener(sortableElement, 'dragend', function (e) {\n            if (!dragging) {\n                return;\n            }\n            dragging.classList.remove(options.draggingClass);\n            addAttribute(dragging, 'aria-grabbed', 'false');\n            if (dragging.getAttribute('aria-copied') === 'true' && addData(dragging, 'dropped') !== 'true') {\n                dragging.remove();\n            }\n            dragging.style.display = dragging.oldDisplay;\n            delete dragging.oldDisplay;\n            var visiblePlaceholder = Array.from(stores.values()).map(function (data) { return data.placeholder; })\n                .filter(function (placeholder) { return placeholder instanceof HTMLElement; })\n                .filter(isInDom)[0];\n            if (visiblePlaceholder) {\n                visiblePlaceholder.remove();\n            }\n            // dispatch sortstart event on each element in group\n            sortableElement.dispatchEvent(new CustomEvent('sortstop', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging\n                }\n            }));\n            previousContainer = null;\n            dragging = null;\n            draggingHeight = null;\n            draggingWidth = null;\n        });\n        /*\n         * Drop Event - https://developer.mozilla.org/en-US/docs/Web/Events/drop\n         * Fires when valid drop target area is hit\n         */\n        addEventListener(sortableElement, 'drop', function (e) {\n            if (!_listsConnected(sortableElement, dragging.parentElement)) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            addData(dragging, 'dropped', 'true');\n            // get the one placeholder that is currently visible\n            var visiblePlaceholder = Array.from(stores.values()).map(function (data) {\n                return data.placeholder;\n            })\n                // filter only HTMLElements\n                .filter(function (placeholder) { return placeholder instanceof HTMLElement; })\n                // filter only elements in DOM\n                .filter(isInDom)[0];\n            // attach element after placeholder\n            insertAfter(visiblePlaceholder, dragging);\n            // remove placeholder from dom\n            visiblePlaceholder.remove();\n            /*\n             * Fires Custom Event - 'sortstop'\n             */\n            sortableElement.dispatchEvent(new CustomEvent('sortstop', {\n                detail: {\n                    origin: {\n                        elementIndex: originElementIndex,\n                        index: originIndex,\n                        container: originContainer\n                    },\n                    item: dragging\n                }\n            }));\n            var placeholder = store(sortableElement).placeholder;\n            var originItems = _filter(originContainer.children, options.items)\n                .filter(function (item) { return item !== placeholder; });\n            var destinationContainer = this.isSortable === true ? this : this.parentElement;\n            var destinationItems = _filter(destinationContainer.children, addData(destinationContainer, 'items'))\n                .filter(function (item) { return item !== placeholder; });\n            var destinationElementIndex = _index(dragging, Array.from(dragging.parentElement.children)\n                .filter(function (item) { return item !== placeholder; }));\n            var destinationIndex = _index(dragging, destinationItems);\n            if (options.dropTargetContainerClass) {\n                destinationContainer.classList.remove(options.dropTargetContainerClass);\n            }\n            /*\n             * When a list item changed container lists or index within a list\n             * Fires Custom Event - 'sortupdate'\n             */\n            if (originElementIndex !== destinationElementIndex || originContainer !== destinationContainer) {\n                sortableElement.dispatchEvent(new CustomEvent('sortupdate', {\n                    detail: {\n                        origin: {\n                            elementIndex: originElementIndex,\n                            index: originIndex,\n                            container: originContainer,\n                            itemsBeforeUpdate: originItemsBeforeUpdate,\n                            items: originItems\n                        },\n                        destination: {\n                            index: destinationIndex,\n                            elementIndex: destinationElementIndex,\n                            container: destinationContainer,\n                            itemsBeforeUpdate: destinationItemsBeforeUpdate,\n                            items: destinationItems\n                        },\n                        item: dragging\n                    }\n                }));\n            }\n        });\n        var debouncedDragOverEnter = _debounce(function (sortableElement, element, pageX, pageY) {\n            if (!dragging) {\n                return;\n            }\n            // set placeholder height if forcePlaceholderSize option is set\n            if (options.forcePlaceholderSize) {\n                store(sortableElement).placeholder.style.height = draggingHeight + 'px';\n                store(sortableElement).placeholder.style.width = draggingWidth + 'px';\n            }\n            // if element the draggedItem is dragged onto is within the array of all elements in list\n            // (not only items, but also disabled, etc.)\n            if (Array.from(sortableElement.children).indexOf(element) > -1) {\n                var thisHeight = _getElementHeight(element);\n                var thisWidth = _getElementWidth(element);\n                var placeholderIndex = _index(store(sortableElement).placeholder, element.parentElement.children);\n                var thisIndex = _index(element, element.parentElement.children);\n                // Check if `element` is bigger than the draggable. If it is, we have to define a dead zone to prevent flickering\n                if (thisHeight > draggingHeight || thisWidth > draggingWidth) {\n                    // Dead zone?\n                    var deadZoneVertical = thisHeight - draggingHeight;\n                    var deadZoneHorizontal = thisWidth - draggingWidth;\n                    var offsetTop = _offset(element).top;\n                    var offsetLeft = _offset(element).left;\n                    if (placeholderIndex < thisIndex &&\n                        ((options.orientation === 'vertical' && pageY < offsetTop) ||\n                            (options.orientation === 'horizontal' && pageX < offsetLeft))) {\n                        return;\n                    }\n                    if (placeholderIndex > thisIndex &&\n                        ((options.orientation === 'vertical' && pageY > offsetTop + thisHeight - deadZoneVertical) ||\n                            (options.orientation === 'horizontal' && pageX > offsetLeft + thisWidth - deadZoneHorizontal))) {\n                        return;\n                    }\n                }\n                if (dragging.oldDisplay === undefined) {\n                    dragging.oldDisplay = dragging.style.display;\n                }\n                if (dragging.style.display !== 'none') {\n                    dragging.style.display = 'none';\n                }\n                // To avoid flicker, determine where to position the placeholder\n                // based on where the mouse pointer is relative to the elements\n                // vertical center.\n                var placeAfter = false;\n                try {\n                    var elementMiddleVertical = _offset(element).top + element.offsetHeight / 2;\n                    var elementMiddleHorizontal = _offset(element).left + element.offsetWidth / 2;\n                    placeAfter = (options.orientation === 'vertical' && (pageY >= elementMiddleVertical)) ||\n                        (options.orientation === 'horizontal' && (pageX >= elementMiddleHorizontal));\n                }\n                catch (e) {\n                    placeAfter = placeholderIndex < thisIndex;\n                }\n                if (placeAfter) {\n                    insertAfter(element, store(sortableElement).placeholder);\n                }\n                else {\n                    insertBefore(element, store(sortableElement).placeholder);\n                }\n                // get placeholders from all stores & remove all but current one\n                Array.from(stores.values())\n                    // remove empty values\n                    .filter(function (data) { return data.placeholder !== undefined; })\n                    // foreach placeholder in array if outside of current sorableContainer -> remove from DOM\n                    .forEach(function (data) {\n                    if (data.placeholder !== store(sortableElement).placeholder) {\n                        data.placeholder.remove();\n                    }\n                });\n            }\n            else {\n                // get all placeholders from store\n                var placeholders = Array.from(stores.values())\n                    .filter(function (data) { return data.placeholder !== undefined; })\n                    .map(function (data) {\n                    return data.placeholder;\n                });\n                // check if element is not in placeholders\n                if (placeholders.indexOf(element) === -1 && sortableElement === element && !_filter(element.children, options.items).length) {\n                    placeholders.forEach(function (element) { return element.remove(); });\n                    element.appendChild(store(sortableElement).placeholder);\n                }\n            }\n        }, options.debounce);\n        // Handle dragover and dragenter events on draggable items\n        var onDragOverEnter = function (e) {\n            var element = e.target;\n            var sortableElement = element.isSortable === true ? element : findSortable(element, e);\n            element = findDragElement(sortableElement, element);\n            if (!dragging || !_listsConnected(sortableElement, dragging.parentElement) || addData(sortableElement, '_disabled') === 'true') {\n                return;\n            }\n            var options = addData(sortableElement, 'opts');\n            if (parseInt(options.maxItems) && _filter(sortableElement.children, addData(sortableElement, 'items')).length >= parseInt(options.maxItems) && dragging.parentElement !== sortableElement) {\n                return;\n            }\n            e.preventDefault();\n            e.stopPropagation();\n            e.dataTransfer.dropEffect = store(sortableElement).getConfig('copy') === true ? 'copy' : 'move';\n            debouncedDragOverEnter(sortableElement, element, e.pageX, e.pageY);\n        };\n        addEventListener(listItems.concat(sortableElement), 'dragover', onDragOverEnter);\n        addEventListener(listItems.concat(sortableElement), 'dragenter', onDragOverEnter);\n    });\n    return sortableElements;\n}\nsortable.destroy = function (sortableElement) {\n    _destroySortable(sortableElement);\n};\nsortable.enable = function (sortableElement) {\n    _enableSortable(sortableElement);\n};\nsortable.disable = function (sortableElement) {\n    _disableSortable(sortableElement);\n};\n/* START.TESTS_ONLY */\nsortable.__testing = {\n    // add internal methods here for testing purposes\n    _data: addData,\n    _removeItemEvents: _removeItemEvents,\n    _removeItemData: _removeItemData,\n    _removeSortableData: _removeSortableData,\n    _removeContainerEvents: _removeContainerEvents\n};\n\nexport default sortable;\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['admin/components/ExtensionPage'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/throttleDebounce'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/helpers/icon'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/extractText'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/Component'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Button'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Switch'];","import app from 'flarum/admin/app';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport extractText from 'flarum/common/utils/extractText';\r\nimport Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Switch from 'flarum/common/components/Switch';\r\n\r\nexport default class FieldEdit extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.answer = this.attrs.answer;\r\n        this.dirty = false;\r\n        this.processing = false;\r\n    }\r\n\r\n    view() {\r\n        return (\r\n            <div className=\"Mason-Box\">\r\n                {/* Only suggested answers can be reordered */}\r\n                {this.answer.is_suggested() && [<span className=\"fas fa-arrows-alt Mason-Box--handle js-answer-handle\" />, ' ']}\r\n                <span\r\n                    onclick={() => {\r\n                        const newContent = prompt(\r\n                            extractText(app.translator.trans('litalino-mason.admin.buttons.edit-answer-prompt')),\r\n                            this.answer.content()\r\n                        );\r\n\r\n                        if (newContent) {\r\n                            this.updateAttribute('content', newContent);\r\n                        }\r\n                    }}\r\n                    title={extractText(app.translator.trans('litalino-mason.admin.buttons.edit-answer'))}\r\n                >\r\n                    {this.answer.content()} {icon('fas fa-pen')}\r\n                </span>\r\n                <Switch\r\n                    state={this.answer.is_suggested()}\r\n                    onchange={(value) => {\r\n                        this.updateAttribute('is_suggested', value);\r\n\r\n                        // Save right away, because updating the model with immediately trigger a redraw of the UI\r\n                        // And the unsaved state won't be preserved because the AnswerEdit component changes its place\r\n                        this.saveAnswer();\r\n                    }}\r\n                >\r\n                    {app.translator.trans('litalino-mason.admin.fields.is_suggested')}\r\n                </Switch>\r\n                <div className=\"ButtonGroup\">\r\n                    <Button\r\n                        className=\"Button Button--primary\"\r\n                        loading={this.processing}\r\n                        disabled={!this.readyToSave()}\r\n                        onclick={this.saveAnswer.bind(this)}\r\n                    >\r\n                        {app.translator.trans('litalino-mason.admin.buttons.save-answer')}\r\n                    </Button>\r\n                    <Button className=\"Button Button--danger\" loading={this.processing} onclick={this.deleteAnswer.bind(this)}>\r\n                        {app.translator.trans('litalino-mason.admin.buttons.delete-answer')}\r\n                    </Button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    updateAttribute(attribute, value) {\r\n        this.answer.pushAttributes({\r\n            [attribute]: value,\r\n        });\r\n\r\n        this.dirty = true;\r\n    }\r\n\r\n    readyToSave() {\r\n        return this.dirty;\r\n    }\r\n\r\n    saveAnswer() {\r\n        this.processing = true;\r\n\r\n        this.answer\r\n            .save(this.answer.data.attributes)\r\n            .then(() => {\r\n                this.processing = false;\r\n                this.dirty = false;\r\n\r\n                m.redraw();\r\n            })\r\n            .catch((err) => {\r\n                this.processing = false;\r\n\r\n                throw err;\r\n            });\r\n    }\r\n\r\n    deleteAnswer() {\r\n        if (\r\n            !confirm(\r\n                extractText(\r\n                    app.translator.trans('litalino-mason.admin.messages.delete-answer-confirmation', {\r\n                        content: this.answer.content(),\r\n                    })\r\n                )\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        this.processing = true;\r\n\r\n        this.answer\r\n            .delete()\r\n            .then(() => {\r\n                this.processing = false;\r\n\r\n                m.redraw();\r\n            })\r\n            .catch((err) => {\r\n                this.processing = false;\r\n\r\n                throw err;\r\n            });\r\n    }\r\n}\r\n","export default function sortByAttribute<T extends { [k in K]: () => any }, K extends string | number | symbol>(items: T[], attr: K) {\r\n    if (!attr) attr = 'sort';\r\n    return items.sort((a, b) => a[attr]() - b[attr]());\r\n}\r\n","import sortable from 'html5sortable/dist/html5sortable.es.js';\r\n\r\nimport app from 'flarum/admin/app';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport { debounce } from 'flarum/common/utils/throttleDebounce';\r\n\r\nimport AnswerEdit from './AnswerEdit';\r\nimport sortByAttribute from '@common/helpers/sortByAttribute';\r\n\r\nexport default class FieldAnswersEdit extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.field = this.attrs.field;\r\n        this.processing = false;\r\n        this.new_content = '';\r\n        this.showUserAnswers = false;\r\n    }\r\n\r\n    configSortable() {\r\n        const container = this.element.querySelector('.js-answers-container');\r\n\r\n        // If the field doesn't exist, it doesn't have a field edit area\r\n        if (!container) {\r\n            return;\r\n        }\r\n\r\n        const el = sortable(container, {\r\n            handle: '.js-answer-handle',\r\n        })[0];\r\n\r\n        // Prevents issue with more and more event listeners\r\n        // being added, resulting in 100s of XHR requests.\r\n        el.removeEventListener('sortupdate', this.sortingChanged);\r\n        el.addEventListener('sortupdate', this.sortingChanged);\r\n    }\r\n\r\n    oncreate(vnode) {\r\n        super.oncreate(vnode);\r\n\r\n        this.configSortable();\r\n    }\r\n\r\n    onupdate() {\r\n        this.configSortable();\r\n    }\r\n\r\n    view() {\r\n        if (!this.field.exists) {\r\n            return <div>{app.translator.trans('litalino-mason.admin.fields.save-field-for-answers')}</div>;\r\n        }\r\n\r\n        let suggestedAnswers = [];\r\n        let userAnswers = [];\r\n\r\n        (this.field.allAnswers() || []).forEach((answer) => {\r\n            // When answers are deleted via store.delete() they stay as an \"undefined\" relationship\r\n            // We ignore these deleted answers\r\n            if (typeof answer === 'undefined') {\r\n                return;\r\n            }\r\n\r\n            if (answer.is_suggested()) {\r\n                suggestedAnswers.push(answer);\r\n            } else {\r\n                userAnswers.push(answer);\r\n            }\r\n        });\r\n\r\n        return [\r\n            <div>\r\n                <div className=\"Mason-Container js-answers-container\">\r\n                    {sortByAttribute(suggestedAnswers).map((answer) => (\r\n                        <div className=\"js-answer-data\" key={answer.id()} data-id={answer.id()}>\r\n                            <AnswerEdit answer={answer} />\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n                {userAnswers.length && (\r\n                    <>\r\n                        <button\r\n                            className=\"Button Button--block Mason-Box-Header\"\r\n                            onclick={() => {\r\n                                this.showUserAnswers = !this.showUserAnswers;\r\n                            }}\r\n                        >\r\n                            <div className=\"Mason-Box-Header-Title\">\r\n                                {app.translator.trans('litalino-mason.admin.buttons.show-user-answers', {\r\n                                    count: userAnswers.length,\r\n                                })}\r\n                            </div>\r\n                            <div>{icon('fas fa-chevron-' + (this.showUserAnswers ? 'up' : 'down'))}</div>\r\n                        </button>\r\n                        {this.showUserAnswers && (\r\n                            <div className=\"Mason-Container\">\r\n                                {sortByAttribute(userAnswers, 'content').map((answer) => (\r\n                                    <div key={answer.id()}>\r\n                                        <AnswerEdit answer={answer} />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </>\r\n                )}\r\n            </div>,\r\n            <div className=\"Form-group\">\r\n                <label>\r\n                    {app.translator.trans('litalino-mason.admin.fields.new-answer')}\r\n                    <input\r\n                        className=\"FormControl\"\r\n                        value={this.new_content}\r\n                        oninput={(e) => {\r\n                            this.new_content = e.target.value;\r\n                        }}\r\n                        placeholder={app.translator.trans('litalino-mason.admin.fields.new-answer-placeholder')}\r\n                    />\r\n                </label>\r\n            </div>,\r\n            <div className=\"Form-group\">\r\n                <Button className=\"Button Button--primary\" loading={this.processing} disabled={!this.new_content} onclick={this.saveField.bind(this)}>\r\n                    {app.translator.trans('litalino-mason.admin.buttons.add-answer')}\r\n                </Button>\r\n            </div>,\r\n        ];\r\n    }\r\n\r\n    saveField() {\r\n        this.processing = true;\r\n\r\n        app.request({\r\n            method: 'POST',\r\n            url: app.forum.attribute('apiUrl') + this.field.apiEndpoint() + '/answers',\r\n            body: {\r\n                data: {\r\n                    attributes: {\r\n                        content: this.new_content,\r\n                        is_suggested: true,\r\n                    },\r\n                },\r\n            },\r\n        }).then((result) => {\r\n            app.store.pushPayload(result);\r\n\r\n            this.new_content = '';\r\n            this.processing = false;\r\n            m.redraw();\r\n        });\r\n    }\r\n\r\n    sortingChanged = debounce(500, () => {\r\n        const sorting = this.$('.js-answer-data')\r\n            .map(function () {\r\n                return $(this).data('id');\r\n            })\r\n            .get();\r\n\r\n        this.updateSort(sorting);\r\n    });\r\n\r\n    updateSort(sorting) {\r\n        app.request({\r\n            method: 'POST',\r\n            url: app.forum.attribute('apiUrl') + this.field.apiEndpoint() + '/answers/order',\r\n            body: {\r\n                sort: sorting,\r\n            },\r\n        }).then((result) => {\r\n            // Update sort attributes\r\n            app.store.pushPayload(result);\r\n            m.redraw();\r\n        });\r\n    }\r\n}\r\n","import app from 'flarum/admin/app';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport extractText from 'flarum/common/utils/extractText';\r\nimport Component from 'flarum/common/Component';\r\nimport Button from 'flarum/common/components/Button';\r\nimport Switch from 'flarum/common/components/Switch';\r\nimport FieldAnswersEdit from './FieldAnswersEdit';\r\n\r\nexport default class FieldEdit extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.field = this.attrs.field;\r\n        this.dirty = false;\r\n        this.processing = false;\r\n        this.toggleFields = false;\r\n\r\n        if (!this.field) {\r\n            this.initNewField();\r\n        }\r\n    }\r\n\r\n    initNewField() {\r\n        this.field = app.store.createRecord('mason-fields', {\r\n            attributes: {\r\n                name: '',\r\n                description: '',\r\n                min_answers_count: 0,\r\n                max_answers_count: 1, // Currently not visible in the editor\r\n                user_values_allowed: false,\r\n                show_when_empty: false,\r\n                validation: '',\r\n                icon: '',\r\n            },\r\n        });\r\n    }\r\n\r\n    boxTitle() {\r\n        if (this.field.exists) {\r\n            return this.field.name();\r\n        }\r\n\r\n        return app.translator.trans('litalino-mason.admin.buttons.new-field');\r\n    }\r\n\r\n    view() {\r\n        return (\r\n            <div className=\"Mason-Box\">\r\n                {this.field.exists && <span className=\"fas fa-arrows-alt Mason-Box--handle js-field-handle\" />}\r\n                <button\r\n                    className=\"Button Button--block Mason-Box-Header\"\r\n                    onclick={() => {\r\n                        this.toggleFields = !this.toggleFields;\r\n                    }}\r\n                >\r\n                    <div className=\"Mason-Box-Header-Title\">{this.boxTitle()}</div>\r\n                    <div>\r\n                        {this.field.exists && app.translator.trans('litalino-mason.admin.buttons.edit-field') + ' '}\r\n                        {icon('fas fa-chevron-' + (this.toggleFields ? 'up' : 'down'))}\r\n                    </div>\r\n                </button>\r\n                {this.toggleFields && this.viewFields()}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    viewFields() {\r\n        return [\r\n            <div className=\"Mason-Box--row\">\r\n                <div className=\"Mason-Box--column\">\r\n                    <h4>{app.translator.trans('litalino-mason.admin.titles.field-settings')}</h4>\r\n                    <div className=\"Form-group\">\r\n                        <label>\r\n                            {app.translator.trans('litalino-mason.admin.fields.name')}\r\n                            <input\r\n                                className=\"FormControl\"\r\n                                value={this.field.name()}\r\n                                oninput={(event) => {\r\n                                    this.updateAttribute('name', event.target.value);\r\n                                }}\r\n                            />\r\n                            <div className=\"helpText\">{app.translator.trans('litalino-mason.admin.fields.name-help')}</div>\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"Form-group\">\r\n                        <label>\r\n                            {app.translator.trans('litalino-mason.admin.fields.description')}\r\n                            <input\r\n                                className=\"FormControl\"\r\n                                value={this.field.description()}\r\n                                oninput={(event) => {\r\n                                    this.updateAttribute('description', event.target.value);\r\n                                }}\r\n                            />\r\n                            <div className=\"helpText\">{app.translator.trans('litalino-mason.admin.fields.description-help')}</div>\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"Form-group\">\r\n                        <label>\r\n                            {/* multi-answers were never implemented so min_answers_count just switches between 0 and 1 for optional and required */}\r\n                            <Switch\r\n                                state={this.field.min_answers_count() === 1}\r\n                                onchange={(val) => this.updateAttribute('min_answers_count', val ? 1 : 0)}\r\n                            >\r\n                                {app.translator.trans('litalino-mason.admin.fields.required')}\r\n                            </Switch>\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"Form-group\">\r\n                        <label>\r\n                            <Switch state={this.field.show_when_empty()} onchange={this.updateAttribute.bind(this, 'show_when_empty')}>\r\n                                {app.translator.trans('litalino-mason.admin.fields.show_when_empty')}\r\n                            </Switch>\r\n                        </label>\r\n                        <div className=\"helpText\">{app.translator.trans('litalino-mason.admin.fields.show_when_empty-help')}</div>\r\n                    </div>\r\n                    <div className=\"Form-group\">\r\n                        <label>\r\n                            <Switch state={this.field.user_values_allowed()} onchange={this.updateAttribute.bind(this, 'user_values_allowed')}>\r\n                                {app.translator.trans('litalino-mason.admin.fields.user_values_allowed')}\r\n                            </Switch>\r\n                        </label>\r\n                        <div className=\"helpText\">{app.translator.trans('litalino-mason.admin.fields.user_values_allowed-help')}</div>\r\n                    </div>\r\n                    <div className=\"Form-group\">\r\n                        <label>\r\n                            {app.translator.trans('litalino-mason.admin.fields.validation')}\r\n                            <input\r\n                                className=\"FormControl\"\r\n                                disabled={!this.field.user_values_allowed()}\r\n                                placeholder={\r\n                                    this.field.user_values_allowed()\r\n                                        ? ''\r\n                                        : app.translator.trans('litalino-mason.admin.fields.enable-user-values-for-validation')\r\n                                }\r\n                                value={this.field.validation()}\r\n                                oninput={(e) => {\r\n                                    this.updateAttribute('validation', e.target.value);\r\n                                }}\r\n                            />\r\n                            <div className=\"helpText\">\r\n                                {app.translator.trans('litalino-mason.admin.fields.validation-help', {\r\n                                    a: <a href=\"https://laravel.com/docs/6.x/validation#available-validation-rules\" target=\"_blank\" />,\r\n                                })}\r\n                            </div>\r\n                        </label>\r\n                    </div>\r\n                    <div className=\"Form-group\">\r\n                        <label>\r\n                            {app.translator.trans('litalino-mason.admin.fields.icon')} {this.iconPreview(this.field.icon())}\r\n                            <input\r\n                                className=\"FormControl\"\r\n                                value={this.field.icon()}\r\n                                oninput={(event) => {\r\n                                    this.updateAttribute('icon', event.target.value);\r\n                                }}\r\n                            />\r\n                        </label>\r\n                        <div className=\"helpText\">\r\n                            {app.translator.trans('litalino-mason.admin.fields.icon-help', {\r\n                                a: <a href=\"https://fontawesome.com/icons?m=free\" target=\"_blank\" />,\r\n                            })}\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"Mason-Box--column\">\r\n                        <h4>{app.translator.trans('litalino-mason.admin.titles.field-answers')}</h4>\r\n                        <div className=\"Form-group\">\r\n                            <FieldAnswersEdit field={this.field} />\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>,\r\n            <div className=\"ButtonGroup\">\r\n                <Button\r\n                    className=\"Button Button--primary\"\r\n                    loading={this.processing}\r\n                    disabled={!this.readyToSave()}\r\n                    onclick={this.saveField.bind(this)}\r\n                >\r\n                    {app.translator.trans('litalino-mason.admin.buttons.' + (this.field.exists ? 'save' : 'add') + '-field')}\r\n                </Button>\r\n\r\n                {this.field.exists && (\r\n                    <Button className=\"Button Button--danger\" loading={this.processing} onclick={this.deleteField.bind(this)}>\r\n                        {app.translator.trans('litalino-mason.admin.buttons.delete-field')}\r\n                    </Button>\r\n                )}\r\n            </div>,\r\n        ];\r\n    }\r\n\r\n    updateAttribute(attribute, value) {\r\n        this.field.pushAttributes({\r\n            [attribute]: value,\r\n        });\r\n\r\n        this.dirty = true;\r\n    }\r\n\r\n    readyToSave() {\r\n        // TODO: check required fields\r\n        return this.dirty;\r\n    }\r\n\r\n    saveField() {\r\n        this.processing = true;\r\n\r\n        const createNewRecord = !this.field.exists;\r\n\r\n        this.field\r\n            .save(this.field.data.attributes)\r\n            .then(() => {\r\n                if (createNewRecord) {\r\n                    this.initNewField();\r\n                    this.toggleFields = false;\r\n                }\r\n\r\n                this.processing = false;\r\n                this.dirty = false;\r\n\r\n                m.redraw();\r\n            })\r\n            .catch((err) => {\r\n                this.processing = false;\r\n\r\n                throw err;\r\n            });\r\n    }\r\n\r\n    deleteField() {\r\n        if (\r\n            !confirm(\r\n                extractText(\r\n                    app.translator.trans('litalino-mason.admin.messages.delete-field-confirmation', {\r\n                        name: this.field.name(),\r\n                    })\r\n                )\r\n            )\r\n        ) {\r\n            return;\r\n        }\r\n\r\n        this.processing = true;\r\n\r\n        this.field\r\n            .delete()\r\n            .then(() => {\r\n                this.processing = false;\r\n\r\n                m.redraw();\r\n            })\r\n            .catch((err) => {\r\n                this.processing = false;\r\n\r\n                throw err;\r\n            });\r\n    }\r\n\r\n    iconPreview(value) {\r\n        if (!value) {\r\n            return '';\r\n        }\r\n\r\n        return [\r\n            ' (',\r\n            app.translator.trans('litalino-mason.admin.fields.icon-preview', {\r\n                preview: icon(value),\r\n            }),\r\n            ')',\r\n        ];\r\n    }\r\n}\r\n","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/utils/saveSettings'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/components/Select'];","import app from 'flarum/admin/app';\r\nimport saveSettings from 'flarum/common/utils/saveSettings';\r\nimport Component from 'flarum/common/Component';\r\nimport Select from 'flarum/common/components/Select';\r\nimport Switch from 'flarum/common/components/Switch';\r\n\r\nexport default class MasonSettings extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.fieldsSectionTitle = app.data.settings['litalino-mason.fields-section-title'] || '';\r\n        this.columnCount = app.data.settings['litalino-mason.column-count'] || 1;\r\n        this.labelsAsPlaceholders = app.data.settings['litalino-mason.labels-as-placeholders'] > 0;\r\n        this.fieldsInHero = app.data.settings['litalino-mason.fields-in-hero'] > 0;\r\n        this.hideEmptyFieldsSection = app.data.settings['litalino-mason.hide-empty-fields-section'] > 0;\r\n        this.tagsAsFields = app.data.settings['litalino-mason.tags-as-fields'] > 0;\r\n        this.tagsFieldName = app.data.settings['litalino-mason.tags-field-name'] || '';\r\n\r\n        this.columnOptions = {};\r\n\r\n        for (let i = 1; i <= 3; i++) {\r\n            this.columnOptions[i] = app.translator.trans('litalino-mason.admin.settings.n-columns', { count: i });\r\n        }\r\n    }\r\n\r\n    view() {\r\n        return (\r\n            <div className=\"Mason-Container\">\r\n                <div className=\"Form-group\">\r\n                    <label>\r\n                        {app.translator.trans('litalino-mason.admin.settings.fields-section-title')}\r\n                        <input\r\n                            className=\"FormControl\"\r\n                            value={this.fieldsSectionTitle}\r\n                            placeholder={app.translator.trans('litalino-mason.admin.settings.fields-section-title-placeholder')}\r\n                            onchange={(event) => {\r\n                                this.updateSetting('fieldsSectionTitle', 'litalino-mason.fields-section-title', event.target.value);\r\n                            }}\r\n                        />\r\n                    </label>\r\n                    <div className=\"helpText\">{app.translator.trans('litalino-mason.admin.settings.fields-section-title-help')}</div>\r\n                </div>\r\n                <div className=\"Form-group\">\r\n                    <label>\r\n                        {app.translator.trans('litalino-mason.admin.settings.column-count')},\r\n                        <Select\r\n                            options={this.columnOptions}\r\n                            value={this.columnCount}\r\n                            onchange={this.updateSetting.bind(this, 'columnCount', 'litalino-mason.column-count')}\r\n                        />\r\n                    </label>\r\n                </div>\r\n                <div className=\"Form-group\">\r\n                    <label>\r\n                        <Switch\r\n                            state={this.labelsAsPlaceholders}\r\n                            onchange={this.updateSetting.bind(this, 'labelsAsPlaceholders', 'litalino-mason.labels-as-placeholders')}\r\n                        >\r\n                            {app.translator.trans('litalino-mason.admin.settings.labels-as-placeholders')}\r\n                        </Switch>\r\n                    </label>\r\n                    <div className=\"helpText\">{app.translator.trans('litalino-mason.admin.settings.labels-as-placeholders-help')}</div>\r\n                </div>\r\n                <div className=\"Form-group\">\r\n                    <label>\r\n                        <Switch state={this.fieldsInHero} onchange={this.updateSetting.bind(this, 'fieldsInHero', 'litalino-mason.fields-in-hero')}>\r\n                            {app.translator.trans('litalino-mason.admin.settings.fields-in-hero')}\r\n                        </Switch>\r\n                    </label>\r\n                </div>\r\n                <div className=\"Form-group\">\r\n                    <label>\r\n                        <Switch\r\n                            state={this.hideEmptyFieldsSection}\r\n                            onchange={this.updateSetting.bind(this, 'hideEmptyFieldsSection', 'litalino-mason.hide-empty-fields-section')}\r\n                        >\r\n                            {app.translator.trans('litalino-mason.admin.settings.hide-empty-fields-section')}\r\n                        </Switch>\r\n                    </label>\r\n                    <div className=\"helpText\">{app.translator.trans('litalino-mason.admin.settings.hide-empty-fields-section-help')}</div>\r\n                </div>\r\n                <div className=\"Form-group\">\r\n                    <label>\r\n                        <Switch state={this.tagsAsFields} onchange={this.updateSetting.bind(this, 'tagsAsFields', 'litalino-mason.tags-as-fields')}>\r\n                            {app.translator.trans('litalino-mason.admin.settings.tags-as-field')}\r\n                        </Switch>\r\n                    </label>\r\n                    <div className=\"helpText\">{app.translator.trans('litalino-mason.admin.settings.tags-as-field-help')}</div>\r\n                </div>\r\n                {this.tagsAsFields && (\r\n                    <div className=\"Form-group\">\r\n                        <label>{app.translator.trans('litalino-mason.admin.settings.tags-field-name')}</label>\r\n                        <input\r\n                            className=\"FormControl\"\r\n                            value={this.tagsFieldName}\r\n                            placeholder={app.translator.trans('litalino-mason.admin.settings.tags-field-name-placeholder')}\r\n                            onchange={(event) => {\r\n                                this.updateSetting('tagsFieldName', 'litalino-mason.tags-field-name', event.target.value);\r\n                            }}\r\n                        />\r\n                    </div>\r\n                )}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Updates setting in database.\r\n     * @param attribute\r\n     * @param setting\r\n     * @param value\r\n     */\r\n    updateSetting(attribute, setting, value) {\r\n        saveSettings({\r\n            [setting]: value,\r\n        });\r\n\r\n        this[attribute] = value;\r\n    }\r\n}\r\n","import app from 'flarum/admin/app';\r\nimport icon from 'flarum/common/helpers/icon';\r\nimport Component from 'flarum/common/Component';\r\nimport Switch from 'flarum/common/components/Switch';\r\nimport sortByAttribute from '@common/helpers/sortByAttribute';\r\n\r\nexport default class TagFields extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n        app.request({\r\n            method: 'GET',\r\n            url: app.forum.attribute('apiUrl') + '/litalino/mason/bytag',\r\n        }).then((result) => {\r\n            app.store.pushPayload(result);\r\n            this.initRows();\r\n        });\r\n\r\n        this.tag = this.attrs.name;\r\n        this.tagID = this.attrs.id;\r\n        this.dirty = false;\r\n        this.processing = false;\r\n        this.toggleFields = false;\r\n        this.dataRow;\r\n        this.fieldsList = [];\r\n        this.matchingTags = [];\r\n    }\r\n\r\n    initRows() {\r\n        const fields = sortByAttribute(app.store.all('mason-fields'));\r\n        const bytags = app.store.all('mason-bytags').filter(bytag => bytag.data.attributes.tag_name == this.tag)\r\n\r\n        // if a Tag or Field has just been created, make its rows in the database\r\n        fields.map((field) => {\r\n            const existed = bytags.find(bytag => bytag.data.attributes.field_name == field.data.attributes.name);\r\n            if (!existed) {\r\n                let rec = app.store.createRecord('mason-bytags', {\r\n                    attributes: {\r\n                        tag_name: this.tag,\r\n                        tag_id: this.tagID,\r\n                        field_name: field.data.attributes.name,\r\n                        switch: false,\r\n                    },\r\n                });\r\n                this.makeRow(rec.data.attributes);\r\n            }\r\n        });\r\n\r\n        // if a field has been deleted, remove it in the database\r\n        bytags.filter(bytag => !fields.find(field => field.data.attributes.name === bytag.data.attributes.field_name)).map(bytag => {\r\n            this.deleteRow(bytag)\r\n        })\r\n\r\n        this.matchingTags = bytags\r\n        // sort alphabetically\r\n        this.matchingTags.sort(function (x, y) {\r\n            let a = x.data.attributes.field_name,\r\n                b = y.data.attributes.field_name;\r\n            return a == b ? 0 : a > b ? 1 : -1;\r\n        });\r\n        m.redraw();\r\n    }\r\n\r\n    makeRow(attributes) {\r\n        app.request({\r\n            method: 'POST',\r\n            url: app.forum.attribute('apiUrl') + '/litalino/mason/bytag',\r\n            body: {\r\n                data: {\r\n                    attributes,\r\n                },\r\n            },\r\n        }).then((result) => {\r\n            app.store.pushPayload(result);\r\n            return;\r\n        });\r\n    }\r\n\r\n    updateRow(field, state) {\r\n        app.request({\r\n            method: 'PATCH',\r\n            url: app.forum.attribute('apiUrl') + '/litalino/mason/bytag/' + field.data.id,\r\n            body: {\r\n                data: {\r\n                    attributes: {\r\n                        switch: state,\r\n                    },\r\n                },\r\n            },\r\n        }).then((result) => {\r\n            app.store.pushPayload(result);\r\n            m.redraw();\r\n        });\r\n    }\r\n\r\n    deleteRow(bytag) {\r\n        app.request({\r\n            method: 'DELETE',\r\n            url: app.forum.attribute('apiUrl') + '/litalino/mason/bytag/' + bytag.data.id,\r\n        }).then((result) => {\r\n            app.store.remove(bytag);\r\n        });\r\n    }\r\n\r\n    reInit(num) {\r\n        // re-initialize once all the rows are made per tag;\r\n        if (app.store.all('mason-fields').length == num) {\r\n            this.init();\r\n        }\r\n    }\r\n\r\n    view() {\r\n        return (\r\n            <div className='Mason-Tags-Dropdown'>\r\n                <div className='Button Button--block Mason-Box-Header' onclick={() => this.toggleFields = !this.toggleFields}>\r\n                    <div className='Mason-Box-Header-Title'>{this.tag}</div>\r\n                    <div>{icon('fas fa-chevron-' + (this.toggleFields ? 'up' : 'down'))}</div>\r\n                </div>\r\n                {this.toggleFields && this.matchingTags.map(field => (\r\n                    <div className='Form-group'>\r\n                        <label>\r\n                            <Switch\r\n                                state={field.data.attributes.switch}\r\n                                onchange={this.updateRow.bind(this, field)}\r\n                            >\r\n                                {field.data.attributes.field_name}\r\n                            </Switch>\r\n                        </label>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n","import app from 'flarum/admin/app';\r\nimport saveSettings from 'flarum/common/utils/saveSettings';\r\nimport Component from 'flarum/common/Component';\r\nimport Switch from 'flarum/common/components/Switch';\r\nimport TagFields from './TagFields'\r\n\r\nexport default class MasonSettingTags extends Component {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        this.byTag = app.data.settings['litalino-mason.by-tag'] > 0;\r\n        this.tagsList = [];\r\n        const tags = app.store.all('tags');\r\n        for ( let i = 0; i < tags.length; i++){   \r\n            const name = tags[i].data.attributes.name;\r\n            const id = tags[i].data.id;\r\n\r\n            this.tagsList.push({name, id});\r\n        }\r\n    }\r\n\r\n    view() {\r\n        return (\r\n            <div className=\"Mason-Container\">\r\n                <div className=\"Form-group\">\r\n                    <label>\r\n                        <Switch state={this.byTag} onchange={this.updateSetting.bind(this, 'byTag', 'litalino-mason.by-tag')}>\r\n                            {app.translator.trans('litalino-mason.admin.settings.by-tag')}\r\n                        </Switch>\r\n                    </label>\r\n                </div>\r\n                {\r\n                    this.byTag && (\r\n                        <div className=\"Form-group\">\r\n                            <label>{app.translator.trans('litalino-mason.admin.settings.by-tag-name')}</label>\r\n                            {this.tagsList.map(tag => (\r\n                                <div className=\"js-tag-data\" data-id={tag.name}>\r\n                                    <TagFields name={tag.name} id={tag.id} />\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Updates setting in database.\r\n     * @param attribute\r\n     * @param setting\r\n     * @param value\r\n     */\r\n    updateSetting(attribute, setting, value) {\r\n        saveSettings({\r\n            [setting]: value,\r\n        });\r\n\r\n        this[attribute] = value;\r\n    }\r\n}\r\n","import sortable from 'html5sortable/dist/html5sortable.es.js';\r\n\r\nimport app from 'flarum/admin/app';\r\nimport ExtensionPage from 'flarum/admin/components/ExtensionPage';\r\nimport { debounce } from 'flarum/common/utils/throttleDebounce';\r\n\r\nimport FieldEdit from '../components/FieldEdit';\r\nimport MasonSettings from '../components/MasonSettings';\r\nimport sortByAttribute from '@common/helpers/sortByAttribute';\r\nimport MasonSettingTags from '../components/MasonSettingTags';\r\n\r\nexport default class MasonFieldsPage extends ExtensionPage {\r\n    oninit(vnode) {\r\n        super.oninit(vnode);\r\n\r\n        app.request({\r\n            method: 'GET',\r\n            url: app.forum.attribute('apiUrl') + '/litalino/mason/fields',\r\n        }).then((result) => {\r\n            app.store.pushPayload(result);\r\n            m.redraw();\r\n        });\r\n    }\r\n\r\n    configSortable() {\r\n        const el = sortable(this.element.querySelector('.js-fields-container'), {\r\n            handle: '.js-field-handle',\r\n        })[0];\r\n\r\n        // Prevents issue with more and more event listeners\r\n        // being added, resulting in 100s of XHR requests.\r\n        el.removeEventListener('sortupdate', this.sortingChanged);\r\n        el.addEventListener('sortupdate', this.sortingChanged);\r\n    }\r\n\r\n    oncreate(vnode) {\r\n        super.oncreate(vnode);\r\n\r\n        this.configSortable();\r\n    }\r\n\r\n    onupdate() {\r\n        this.configSortable();\r\n    }\r\n\r\n    content() {\r\n        const fields = app.store.all('mason-fields');\r\n\r\n        let fieldsList = [];\r\n\r\n        sortByAttribute(fields).forEach((field) => {\r\n            // Build array of fields to show.\r\n            fieldsList.push(\r\n                <div className=\"js-field-data\" key={field.id()} data-id={field.id()}>\r\n                    <FieldEdit field={field} />\r\n                </div>\r\n            );\r\n        });\r\n\r\n        return (\r\n            <div className=\"ExtensionPage-settings\">\r\n                <div className=\"container\">\r\n                    <h2>{app.translator.trans('litalino-mason.admin.titles.fields')}</h2>\r\n                    <div className=\"Mason-Container\">\r\n                        <div className=\"js-fields-container\">{fieldsList}</div>\r\n                        <FieldEdit />\r\n                    </div>\r\n                    <h2>{app.translator.trans('litalino-mason.admin.titles.tag-settings')}</h2>\r\n                    <MasonSettingTags />\r\n                    <h2>{app.translator.trans('litalino-mason.admin.titles.settings')}</h2>\r\n                    <MasonSettings />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    updateSort(sorting) {\r\n        app.request({\r\n            method: 'POST',\r\n            url: app.forum.attribute('apiUrl') + '/litalino/mason/fields/order',\r\n            body: {\r\n                sort: sorting,\r\n            },\r\n        }).then((result) => {\r\n            // Update sort attributes\r\n            app.store.pushPayload(result);\r\n            m.redraw();\r\n        });\r\n    }\r\n\r\n    sortingChanged = debounce(500, () => {\r\n        const sorting = this.$('.js-field-data')\r\n            .map(function () {\r\n                return $(this).data('id');\r\n            })\r\n            .get();\r\n\r\n        this.updateSort(sorting);\r\n    });\r\n}\r\n","import app from 'flarum/admin/app';\r\n\r\nimport Answer from '@common/models/Answer';\r\nimport Field from '@common/models/Field';\r\nimport ByTag from '@common/models/ByTag';\r\nimport MasonFieldsPage from './pages/MasonFieldsPage';\r\n\r\napp.initializers.add('litalino-mason', () => {\r\n    app.store.models['mason-fields'] = Field;\r\n    app.store.models['mason-answers'] = Answer;\r\n    app.store.models['mason-bytags'] = ByTag;\r\n\r\n    app.extensionData\r\n        .for('litalino-mason')\r\n        .registerPage(MasonFieldsPage)\r\n        .registerPermission(\r\n            {\r\n                icon: 'fas fa-eye',\r\n                label: app.translator.trans('litalino-mason.admin.permissions.see-own-fields'),\r\n                permission: 'litalino-mason.see-own-fields',\r\n            },\r\n            'view'\r\n        )\r\n        .registerPermission(\r\n            {\r\n                icon: 'fas fa-eye',\r\n                label: app.translator.trans('litalino-mason.admin.permissions.see-other-fields'),\r\n                permission: 'litalino-mason.see-other-fields',\r\n                allowGuest: true,\r\n            },\r\n            'view'\r\n        )\r\n        .registerPermission(\r\n            {\r\n                icon: 'fas fa-tasks',\r\n                label: app.translator.trans('litalino-mason.admin.permissions.fill-fields'),\r\n                permission: 'litalino-mason.fill-fields',\r\n            },\r\n            'reply'\r\n        )\r\n        .registerPermission(\r\n            {\r\n                icon: 'fas fa-edit',\r\n                label: app.translator.trans('litalino-mason.admin.permissions.update-own-fields'),\r\n                permission: 'litalino-mason.update-own-fields',\r\n            },\r\n            'reply'\r\n        )\r\n        .registerPermission(\r\n            {\r\n                icon: 'fas fa-edit',\r\n                label: app.translator.trans('litalino-mason.admin.permissions.update-other-fields'),\r\n                permission: 'litalino-mason.update-other-fields',\r\n                allowGuest: true,\r\n            },\r\n            'moderate'\r\n        )\r\n        .registerPermission(\r\n            {\r\n                icon: 'fas fa-forward',\r\n                label: app.translator.trans('litalino-mason.admin.permissions.skip-required-fields'),\r\n                permission: 'litalino-mason.skip-required-fields',\r\n            },\r\n            'moderate'\r\n        );\r\n});\r\n"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","flarum","core","compat","_setPrototypeOf","p","setPrototypeOf","bind","__proto__","_inheritsLoose","subClass","superClass","create","constructor","Answer","_Model","_this","_len","arguments","length","args","Array","_key","apply","concat","content","Model","is_suggested","sort","field","apiEndpoint","this","exists","data","id","Field","name","description","min_answers_count","max_answers_count","show_when_empty","user_values_allowed","validation","icon","deleted_at","allAnswers","suggestedAnswers","required","computed","multiple","ByTag","tag_name","tag_id","field_name","addData","element","undefined","h5s","_filter","nodes","selector","NodeList","HTMLCollection","Error","from","filter","item","nodeType","matches","stores","Map","Store","_config","_placeholder","_data","config","forEach","set","mergedConfig","assign","entries","configurable","setConfig","has","getConfig","placeholder","HTMLElement","setData","getData","deleteData","store","sortableElement","addEventListener","eventName","callback","i","removeEventListener","addAttribute","attribute","setAttribute","removeAttribute","dragging","draggingHeight","draggingWidth","originContainer","originIndex","originElementIndex","originItemsBeforeUpdate","previousContainer","destinationItemsBeforeUpdate","_offset","parentElement","getClientRects","rect","left","window","pageXOffset","right","top","pageYOffset","bottom","_index","elementList","indexOf","isInDom","parentNode","insertNode","referenceNode","newElement","position","insertBefore","nextElementSibling","insertAfter","target","_getElementHeight","style","getComputedStyle","getPropertyValue","parseInt","map","int","isNaN","reduce","sum","_getElementWidth","_getHandles","items","querySelector","shadowRoot","getEventTarget","event","composedPath","defaultDragImage","draggedElement","elementOffset","posX","pageX","posY","pageY","_listsConnected","destination","origin","isSortable","acceptFrom","split","sel","defaultConfiguration","connectWith","disableIEFix","copy","placeholderClass","draggingClass","hoverClass","dropTargetContainerClass","debounce","throttleTime","maxItems","itemSerializer","containerSerializer","customDragImage","orientation","_removeItemEvents","_removeContainerEvents","_removeSortableData","sortable","_removeItemData","findSortable","find","el","findDragElement","options","itemlist","children","ele","contains","_enableSortable","opts","handles","handle","document","createElement","dragDrop","parent","sortableElements","method","String","querySelectorAll","slice","test","sortableContainer","customItemSerializer","customContainerSerializer","serializedItem","serializedContainer","serializedItems","node","html","outerHTML","index","container","itemCount","_serialize","configKey","console","warn","_reloadSortable","customPlaceholder","listItems","tempContainer","tagName","appendChild","innerHTML","_a","includes","classList","add","_makePlaceholder","enable","hoverClasses_1","fn","threshold","lastEventTimestamp","_i","now","Date","_throttle","buttons","_b","remove","enableHoverClass","e","stopImmediatePropagation","getAttribute","dragItem","Event","dataTransfer","setDragImage","dragImage","effectAllowed","draggedItem","ditem","cloneNode","display","oldDisplay","_getDragging","dispatchEvent","CustomEvent","detail","elementIndex","originalTarget","itemsBeforeUpdate","outTarget","relatedTarget","fromElement","currentTarget","visiblePlaceholder","values","preventDefault","stopPropagation","originItems","destinationContainer","destinationItems","destinationElementIndex","destinationIndex","func","wait","timeout","debouncedDragOverEnter","forcePlaceholderSize","height","width","thisHeight","thisWidth","placeholderIndex","thisIndex","deadZoneVertical","deadZoneHorizontal","offsetTop","offsetLeft","placeAfter","elementMiddleVertical","offsetHeight","elementMiddleHorizontal","offsetWidth","placeholders","clearTimeout","setTimeout","onDragOverEnter","dropEffect","destroy","_destroySortable","disable","_disableSortable","__testing","FieldEdit","_Component","_proto","oninit","vnode","answer","attrs","dirty","processing","view","m","className","onclick","newContent","prompt","extractText","app","trans","updateAttribute","title","Switch","state","onchange","saveAnswer","Button","loading","disabled","readyToSave","deleteAnswer","_this$answer$pushAttr","pushAttributes","_this2","save","attributes","then","redraw","err","_this3","confirm","Component","sortByAttribute","attr","b","FieldAnswersEdit","sortingChanged","sorting","$","updateSort","new_content","showUserAnswers","configSortable","oncreate","onupdate","userAnswers","push","AnswerEdit","'['","count","oninput","saveField","url","body","result","pushPayload","toggleFields","initNewField","createRecord","boxTitle","viewFields","val","href","iconPreview","deleteField","_this$field$pushAttri","createNewRecord","_this4","preview","MasonSettings","fieldsSectionTitle","settings","columnCount","labelsAsPlaceholders","fieldsInHero","hideEmptyFieldsSection","tagsAsFields","tagsFieldName","columnOptions","updateSetting","Select","setting","_saveSettings","saveSettings","TagFields","init","initRows","tag","tagID","dataRow","fieldsList","matchingTags","fields","all","bytags","bytag","rec","switch","makeRow","deleteRow","x","y","updateRow","reInit","num","MasonSettingTags","byTag","tagsList","tags","MasonFieldsPage","_ExtensionPage","ExtensionPage","models","registerPage","registerPermission","label","permission","allowGuest"],"sourceRoot":""}